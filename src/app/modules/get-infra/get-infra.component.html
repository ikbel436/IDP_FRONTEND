<div class="container mx-auto p-6 md:p-8">
    <div class="flex flex-col items-center justify-center w-full">
        <!-- Title -->
        <div class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-8 px-6 md:px-8 border-b">
            <div class="absolute inset-x-0 bottom-0">
                <mat-progress-bar></mat-progress-bar>
            </div>
            <div class="text-4xl font-extrabold tracking-tight">Infrastructure</div>
        </div>

        <div class="relative overflow-x-auto shadow-md sm:rounded-lg w-full mt-4">
            <table mat-table [dataSource]="dataSource" matSort class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                <!-- Image Column -->
                <ng-container matColumnDef="image">
                    <th mat-header-cell *matHeaderCellDef class="px-6 py-3">Image</th>
                    <td mat-cell *matCellDef="let infra" class="px-6 py-4">
                        <img [src]="infra.imageUrl" alt="Infrastructure Image" class="w-16 h-16 object-cover">
                    </td>
                </ng-container>

                <!-- Title Column -->
                <ng-container matColumnDef="title">
                    <th mat-header-cell *matHeaderCellDef class="px-6 py-3">Title</th>
                    <td mat-cell *matCellDef="let infra" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        {{ infra.title }}
                    </td>
                </ng-container>

                <!-- Description Column -->
                <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef class="px-6 py-3">Description</th>
                    <td mat-cell *matCellDef="let infra" class="px-6 py-4">{{ infra.description }}</td>
                </ng-container>

                <!-- File Name Column -->
                <ng-container matColumnDef="fileName">
                    <th mat-header-cell *matHeaderCellDef class="px-6 py-3">File</th>
                    <td mat-cell *matCellDef="let infra" class="px-6 py-4">
                        <a (click)="downloadFile(infra.fileUrl)" class="text-blue-500 hover:underline">
                            {{ infra.fileUrl.split('/').pop() }}
                        </a>
                    </td>
                </ng-container>


                <!-- Actions Column -->
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef class="px-6 py-3">Actions</th>
                    <td mat-cell *matCellDef="let infra" class="px-6 py-4">
                        <button mat-icon-button color="warn" (click)="deleteDeployment(infra._id)">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </td>
                </ng-container>

                <!-- Header Row -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <!-- Data Rows -->
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>

            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        </div>
    </div>
</div>
